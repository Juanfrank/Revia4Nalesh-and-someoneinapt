<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="PatchOperationFindMod">
	
    <mods>
        <li>Revia Race</li>
    </mods>
	
		<match Class="PatchOperationSequence">
		<operations>
		
			<!-- Removed Revia Weapons, except the RepeatingCrossbow -->
			
				<li Class="PatchOperationRemove">
				<xpath>Defs/ThingDef[defName="ReviaBlessedSerratedDagger" or
				defName="ReviaBlessedSerratedScythe" or
				defName="ReviaBlessedSerratedSword" or
				defName="ReviaChainSword" or
				defName="ReviaFlechetteCannon" or
				defName="ReviaSerratedDagger" or
				defName="ReviaSerratedScythe" or
				defName="ReviaSerratedSword" or
				defName="ReviaThrowingKnife"
				]</xpath>
				</li>
				
				<!-- Repeating Crossbow -->
				
				<li Class="PatchOperationReplace">
					<xpath>/Defs/ThingDef[defName="ReviaRepeatingCrossbow"]/tools</xpath>
					<value>
					<tools>
					  <li Class="CombatExtended.ToolCE">
						<capacities>
						  <li>Blunt</li>
						</capacities>
						<power>7</power>
						<cooldownTime>1.6</cooldownTime>
						<armorPenetrationBlunt>0.65</armorPenetrationBlunt>
					  </li>
					</tools>
				  </value>
				</li>
		
				<li Class="CombatExtended.PatchOperationMakeGunCECompatible">
				  <defName>ReviaRepeatingCrossbow</defName>
				  <statBases>
					<Bulk>8</Bulk>
					<SwayFactor>2.65</SwayFactor>
					<ShotSpread>0.5</ShotSpread>
					<SightsEfficiency>0.6</SightsEfficiency>
					<RangedWeapon_Cooldown>1</RangedWeapon_Cooldown>
				  </statBases>

				  <costList>
					<Steel>60</Steel>
				  </costList>

				  <Properties>
					<verbClass>CombatExtended.Verb_ShootCE</verbClass>
					<hasStandardCommand>True</hasStandardCommand>
					<defaultProjectile>Projectile_CrossbowBolt_Steel</defaultProjectile>
					<burstShotCount>2</burstShotCount>
					<ticksBetweenBurstShots>10</ticksBetweenBurstShots>
					<warmupTime>1</warmupTime>
					<range>26</range>
					<soundCast>Bow_Large</soundCast>
				  </Properties>

				  <AmmoUser>
					<magazineSize>10</magazineSize>
					<reloadTime>10</reloadTime>
					<ammoSet>AmmoSet_CrossbowBolt</ammoSet>
				  </AmmoUser>

				  <FireModes>
					<aimedBurstShotCount>2</aimedBurstShotCount>
					<aiAimMode>AimedShot</aiAimMode>
					<aiUseBurstMode>FALSE</aiUseBurstMode>
				  </FireModes>

				  <weaponTags>
					<li>NeolithicRangedHeavy</li>
					<li>NeolithicRangedChief</li>
					<li>CE_Bow</li>
					<li>ReviaRangedAdvanced</li>
				  </weaponTags>
				</li>
				
		</operations>
		</match>
	</Operation>

</Patch>